extends ../shared/template
block content
  body.bg
    h2 Dashboard
    .row
      .col-md-5
        .panel
          .panel-heading
            h3.panel-title #{user.name}'s Profile
          .panel-body
            .col-md-6
              img.img-responsive.img-thumbnail(src=user.primaryPhoto, style="max-width:200px")
              p <strong> #{user.tagline} </strong>
              p <strong> Email </strong>: #{user.email}
            .col-md-6
              h2= user.name
              p= user.about
              p Age: &nbsp; #{user.age}
              p Category: &nbsp; #{user.category}
              p Looking for: &nbsp; #{user.seeking}

      .col-md-4
        .panel
          .panel-heading
            h3.panel-title Favorites
          .panel-body
            if favorites === 0
              h4 You have no favorites.
            else
              table.table.table-hover.table-bordered
                tbody
                  each fav in user.favorites
                    tr
                      td: a.btn.btn-warning.btn-xs(href='/profile/#{fav}')= fav
      .col-md-3
        .panel
          .panel-heading
            h3.panel-title Customize
          .panel-body#dashBtns
            a.btn.yellow-btn(href='/profile/#{user.email}') View my Profile
            br
            br
            a.btn.yellow-btn(href='/edit') Edit my Profile
            br
            br
            a.btn.yellow-btn(href='/photos') Manage my Photos

    .panel.panel-primary
      .panel-heading
        h3.panel-title Messages
      .panel-body
        if messages.length === 0
          h4 You have no messages.
        else
          table.table.table-hover.table-bordered
            thead
              tr
                th From
                th Date
                th Message
            tbody
              each msg in messages
                tr(style='background-color:#{msg.isRead ? "#eeeeee" : "#aaaaaa"} !important;')
                  td: a.btn.btn-warning.btn-xs(href='/profile/#{msg.sender.email}')= msg.sender.email
                  td= msg.date.toDateString()
                  td: a.btn.btn-primary.btn-xs(href='/messages/#{msg._id}')= msg.body.slice(0, 10) + '...'
    .panel.panel-primary
      .panel-heading
        h3.panel-title Proposals
      .panel-body
        if proposals.length === 0
          h4 You have no proposals.
        else
          table.table.table-hover.table-bordered
            thead
              tr
                th From
                th Date Sent
                th Date Proposed
                th Message
            tbody
              each prop in proposals
                tr(style='background-color:#{prop.isRead ? "#eeeeee" : "#aaaaaa"} !important;')
                  td: a.btn.btn-warning.btn-xs(href='/profile/#{prop.sender.email}')= prop.sender.email
                  td= prop.date.toDateString()
                  td= prop.dateProposed.toDateString()
                  td: a.btn.btn-primary.btn-xs(href='/proposals/#{prop._id}')= prop.body.slice(0, 10) + '...'
    .panel.panel-primary
      .panel-heading
        h3.panel-title Photos
      .panel-body
        if user.photos.length === 0
          h4 You have no photos.
        else
          each photo in user.photos
            .photo
              img.img.img-thumbnail.img-responsive(src=photo, style="max-width:200px")

    .panel.panel-primary
        .panel-heading
          h3.panel-title Gifts
        .panel-body
        if gifts.length === 0
          h4 You have no gifts.
        else
          each gift in gifts
            .gift
              h4= gift.item.name
              img(src=gift.item.photo)
              p From: &nbsp; #{gift.sender.email}
              p= gift.date.toDateString()
    .panel.panel-primary
      .panel-heading
        h3.panel-title Winks
      .panel-body
        if winks.length === 0
          h4 You have no winks.
        else
          each wink in winks
            .wink
              h4 From: &nbsp #{wink.sender.email}
              p= wink.date.toDateString()
             // a(href='/profile/#{wink.sender.email}'):  i.fa-fa-eye


block scripts
